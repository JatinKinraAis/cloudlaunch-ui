<div class="row">
    <form class="form"
        [ngFormModel]="applianceLaunchForm"
        (ngSubmit)="onSubmit(applianceLaunchForm.value)">
    	<div class="col-md-12">
    		<div class="panel panel-info">
    			<div class="panel-heading">Appliance info</div>
    			<div class="panel-body">{{ application.description }}</div>
    		</div>
    	</div>
    	<div class="col-md-12">
        		<div class="panel panel-success">
        			<div class="panel-heading">Launch this appliance: {{ application.name }}</div>
        			<div class="panel-body">
                        <div class="alert alert-danger" role="alert" *ngIf="errorMessage">
                            <span class="glyphicon glyphicon-exclamation-sign"
                                aria-hidden="true"></span> <span class="sr-only">Error:</span> {{ errorMessage }}
                        </div>
                    
                        <div class="form-group">
                            <label for="id_target_version" class="control-label">
                                Which version of this appliance would you like to launch?
                            </label>
                            <ng-select id="target_version"
                              [items]="getApplicationVersions()"
                              (selected)="onVersionSelect($event)"
                              placeholder="No version selected">
                            </ng-select>
                        </div>
                        
                        <div class="form-group" *ngIf="applianceLaunchForm.value['application_version']">
                            <label for="id_target_cloud" class="control-label">
                                On which cloud would you like to launch your appliance?
                            </label>
                            <ng-select id="target_cloud"
                              [items]="clouds"
                              (selected)="onCloudSelect($event)"
                              placeholder="No cloud selected">
                            </ng-select>
                        </div>

                        <div *ngIf="applianceLaunchForm.controls['target_cloud'].value">
                            <form class="form" [ngFormModel]="applianceLaunchForm.find('config_app')">
                                <app-placeholder [initialConfig]="selectedAppCloudConfig.default_launch_config.config_app"
                                        [componentPath]="selectedVersion.frontend_component_path"
                                        [componentName]="selectedVersion.frontend_component_name"></app-placeholder>
                            </form>
                            <!-- Cloud launching part of the form -->
                            <cloudlaunch-config [cloudId]="applianceLaunchForm.controls['target_cloud'].value" [initialConfig]="selectedAppCloudConfig.default_launch_config"></cloudlaunch-config>
                        </div>
        			</div>
        		</div>
    	</div>
    	<div class="col-md-12">
    		<a (click)="goBack()" class="btn btn-raised btn-default"> <i
    			class="material-icons">navigate_before</i> Back
    		</a>
            <button type="submit" class="btn btn-raised btn-default pull-right" [disabled]="!applianceLaunchForm.valid">Launch</button>
            
    	</div>
    </form>
</div>
